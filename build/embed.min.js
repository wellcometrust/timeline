// 18d05f2 - 2013-03-05
(function(b,m,d,f){if(!b.wellcomeTimelineScriptIncluded){b.wellcomeTimelineScriptIncluded=!0;for(var k=m.getElementsByTagName("script"),l,c=k.length-1;0<=c;c--){var q=k[c];if(q.src){l=q.src;break}}var g,e,n=!1;if(!(g=b.jQuery)||d>g.fn.jquery||f(g,l,n)){var a=m.createElement("script");a.type="text/javascript";a.src="//ajax.googleapis.com/ajax/libs/jquery/"+d+"/jquery.min.js";a.onload=a.onreadystatechange=function(){if(!n&&(!(e=this.readyState)||"loaded"==e||"complete"==e))f((g=b.jQuery).noConflict(1), l,n=!0),g(a).remove()};m.documentElement.childNodes[0].appendChild(a)}}})(window,document,"1.7.2",function(b,m,d){function f(c,d,g){function e(){h&&(p?(h.width(b(this).width()),h.height(b(this).height())):(h.width(a.width()),h.height(a.height())))}var n,a,h,f,r,p,s,t,u;a=b(c);a.empty();f=a.attr("data-uri");f=encodeURIComponent(f);r=a.attr("data-eventid");p=!1;s=a.height();c=a.position();t=c.top;u=c.left;b(window).resize(function(){e()});window.onorientationchange=function(){e()};(function(){n=new easyXDM.Socket({remote:"http://"+ k+l+"/timeline.html?isHomeDomain="+d+"&isOnlyInstance="+g+"&dataUri="+f+"&eventId="+r+"&embedScriptUri="+m,container:a.get(0),props:{style:{width:"100%",height:a.height()+"px"},scrolling:"no"},onReady:function(){h=a.find("iframe")},onMessage:function(a,c){a=b.parseJSON(a);switch(a.eventName){case "onToggleFullScreen":(p=a.eventObject)?(b("html").css("overflow","hidden"),window.scrollTo(0,0),h.css({position:"fixed","z-index":9999,height:b(window).height(),width:b(window).width(),top:0,left:0})):(b("html").css("overflow", "auto"),h.css({position:"static","z-index":"auto",height:s,width:"100%",top:t,left:u}));e();n.postMessage(JSON.stringify({eventName:"onToggleFullScreen",eventObject:p}));break;case "onRedirect":window.location.replace(a.eventObject);break;case "onRefresh":window.location.reload();break;case "onTrackEvent":"undefined"!==typeof _trackEvent&&_trackEvent(a.eventObject.category,a.eventObject.action,a.eventObject.label,a.eventObject.value,a.eventObject.noninteraction);break;default:jQuery(document).trigger(a.eventName, [a.eventObject])}}})})()}b.support.cors=!0;d=document.createElement("a");d.href=m;var k=d.hostname,l=80==d.port?"":":"+d.port;b.when(b.getScript("//"+k+l+"/js/libs/easyXDM.min.js"),b.getScript("//"+k+l+"/js/libs/json2.min.js")).done(function(){for(var c=b(".timeline"),d=document.domain===k,g=1===c.length,e=0;e<c.length;e++)f(c[e],d,g)})});
